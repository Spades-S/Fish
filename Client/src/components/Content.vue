<template>
    <div id="page">
        <div class="banner">
            <p><img src="../assets/img/1-1.gif"></p>
            <p><img src="../assets/img/top.jpg"></p>
        </div>
        <div class="buy">
            <div class="row1">
                <strong>￥99</strong>
                <ol>
                    <li>
                        <p>原价</p>
                        ￥299
                    </li>
                    <li>
                        <p>折扣</p>3.3
                    </li>
                    <li>
                        <p>节省</p>
                        ￥200
                    </li>
                </ol>
            </div>

            <article class="des"></article>
            <a class="btn" href="#order">立即购买</a></div>
        <div class="singleBest">
            <div class="bTop">
                <div class="line"></div>
            </div>
            <div class="showcontent">
                <h2>抢购描述</h2>
                <div class="btn">
                    <p>
                    </p>
                    <p style="margin-top: 0px; margin-bottom: 0px; white-space: normal; box-sizing: border-box; font-family: 微软雅黑; line-height: 24px; background-color: rgb(249, 249, 249);">
                        <span style="margin: 0px; box-sizing: border-box; font-family: 微软雅黑, &#39;Microsoft YaHei&#39;;">
<strong style="margin: 0px; box-sizing: border-box;">
<span style="margin: 0px; box-sizing: border-box; font-size: 24px;">
<span style="margin: 0px; box-sizing: border-box; color: rgb(255, 0, 0);">正品龙纹鲤台钓竿</span>震撼来袭，厂价直销，全国包邮，货到付款！</span>
                        </strong>
                        </span>
                    </p>
                    <p style="margin-top: 0px; margin-bottom: 0px; white-space: normal; box-sizing: border-box; font-family: 微软雅黑; line-height: 24px; background-color: rgb(249, 249, 249);">
                        <span style="margin: 0px; box-sizing: border-box;">
<span style="margin: 0px; box-sizing: border-box; font-size: 16.8px;">
<strong style="margin: 0px; box-sizing: border-box;">超轻量，高硬度，腰力强劲，20斤以上随便钓，搏击大鱼！</strong></span> </span>
                    </p>
                    <p style="margin-top: 0px; margin-bottom: 0px; white-space: normal; box-sizing: border-box; font-family: 微软雅黑; line-height: 24px; background-color: rgb(249, 249, 249);">
                        <span style="margin: 0px; box-sizing: border-box; font-family: 微软雅黑, &#39;Microsoft YaHei&#39;;">
<span style="margin: 0px; box-sizing: border-box; font-size: 24px;">
<strong style="margin: 0px; box-sizing: border-box;">
<strong style="margin: 0px; box-sizing: border-box; color: rgb(85, 85, 85); font-family: 微软雅黑; line-height: 28px; orphans: 2; widows: 2; padding: 0px; font-size: 16.8px;">
<span style="margin: 0px; box-sizing: border-box; padding: 0px; color: rgb(255, 0, 0);">
<span style="margin: 0px; box-sizing: border-box; padding: 0px;">产品优势：旋转合金竿稍，环保纳米涂漆，高碳纤维卷制，EVA材质枪把久握不累！电话预定4008057725</span></span>
                        </strong>
                        </strong>
                        </span>
                        <span style="margin: 0px; box-sizing: border-box; padding: 0px;">电话预定：
TEL:4008057725 企业电话仅收市话费 放心拨打  </span> </span>
                    </p>
                    <p></p>
                </div>
                <p>
                </p>
                <p>
                </p>
                <h2>产品简介</h2>
                <p><img src="../assets/img/01.gif"></p>
                <p><img src="../assets/img/02.jpg"></p>
                <p><img src="../assets/img/03.jpg">
                </p>
                <p><img src="../assets/img/04.jpg"></p>
                <p><img src="../assets/img/05.jpg"></p>
                <p><img src="../assets/img/5-1.jpg"></p>
                <p><img src="../assets/img/06.jpg"></p>
                <p><img src="../assets/img/07.jpg"></p>
                <p><img src="../assets/img/08.jpg"></p>
                <p><img src="../assets/img/09.jpg"></p>
                <p><img src="../assets/img/9-1.jpg"></p>
                <p><img src="../assets/img/10.jpg"></p>
                <p><img src="../assets/img/11.jpg"></p>
                <p><img src="../assets/img/12.jpg"></p>
                <p><img src="../assets/img/13.jpg"></p>
                <p><img src="../assets/img/14.jpg"></p>
                <p><img src="../assets/img/15.jpg"></p>
                <p><img src="../assets/img/16.jpg"></p>
                <p><img src="../assets/img/17.jpg"></p>
                <p><img src="../assets/img/18.jpg"></p>
                <p><img src="../assets/img/19.jpg"></p>
                <p><img src="../assets/img/20.jpg"></p>
                <p><img src="../assets/img/21.jpg"></p>
                <p><img src="../assets/img/22.jpg"></p>
                <p><img src="../assets/img/23.jpg"></p>
                <p><img src="../assets/img/24.jpg"></p>
                <p><img src="../assets/img/25.jpg"></p>
                <p><img src="../assets/img/26.jpg"></p>
                <p><img src="../assets/img/27.jpg"></p>
                <p><img src="../assets/img/28.jpg"></p>
                <p><img src="../assets/img/28-1.jpg"></p>
                <p><img src="../assets/img/41.jpg"></p>
                <p><img src="../assets/img/30.jpg"></p>
                <p><img src="../assets/img/31.jpg"></p>
                <p><img src="../assets/img/32.jpg"></p>
                <p><img src="../assets/img/33.jpg"></p>
                <p><img src="../assets/img/34.jpg"></p>
                <p><img src="../assets/img/35.jpg"></p>
                <p><img src="../assets/img/36.jpg"></p>
                <p><img src="../assets/img/37.jpg"></p>
                <p><img src="../assets/img/38.jpg"></p>
                <p><img src="../assets/img/44.jpg"></p>
                <p><img src="../assets/img/38-1.jpg"></p>
                <p><img src="../assets/img/39.jpg"></p>
                <p><img src="../assets/img/40.jpg"></p>
                <p><img src="../assets/img/42.jpg"></p>
                <p><img src="../assets/img/43.jpg">
                </p>
                <br>
                <br>
            </div>
            <article>
                <h2>温馨提示</h2>

                <div class="cpshuoming">
                    <p>
                        <span style="font-family: 微软雅黑; font-size:16px;">部分客户提交的订单信息不完整，我们会在24小时内给尊贵的你至电核实；请亲一定要高抬贵手，接听下电话以方便你的订单及时处理发货，谢谢你的配合与支持！建议在线提交订单，不会预订,在线预订不了,请致电预订4008057725 或18971247426</span>
                    </p>
                </div>

            </article>
            <div id="order">
                <div class="wftitle">在线快速订购，点击对应米数,会出现惊喜价格!</div>
                <div class="wfwrap">
                    <div class="wfwrapbox">
                        <div class="wfform-box">
                            <label class="wfform-label">订购产品</label>
                            <div class="wfform-pro radio" @click="changeProduct">
                                <span class="radio-item" v-for="(product,index) in products">
                                    <input type="radio" name="product" :value="product.price" checked
                                           :data-id="product.id"
                                           :id="'product'+product.id" v-if="index===0">
                                      <input type="radio" name="product" :value="product.price"
                                             :id="'product'+product.id" v-else>
                                    <label :for="'product'+product.id">{{product.name}}</label>
                                </span>

                            </div>
                        </div>
                        <div class="wfform-box">
                            <label class="wfform-label">数量</label>
                            <div class="wfform-opt wfnums">
                                <a @click="numdec" title="减1" class="dec" style="text-align: center;"></a>
                                <input type="text" id="wfnums" name="wfnums" :value="num" readonly="">
                                <a @click="numinc" title="加1" class="lnc" style="text-align: center;"></a>
                                <strong><em class="rmb">¥</em><em id="showprice">{{Number(price * num).toFixed(2)}}</em></strong>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="wfwrap">
                    <div class="wfwrapbox">
                        <div class="wfform-box">
                            <label class="wfform-label red">赠送产品</label>
                            <div class="wfform-pro radio">
                                <span class="auto"><input type="radio" checked="" name="wfgiftname" id="wfgiftname"
                                                          value="+杆梢+线漂钩+终身免费配节" class="input-radio"
                                                          lay-ignore=""><label
                                        for="wfgiftname">+杆梢+线漂钩+终身免费配节</label></span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="wfwrap">
                    <div class="wfwrapbox pt15">
                        <div class="wfform-box">
                            <label class="wfform-label">姓名</label>
                            <div class="wfform-opt">
                                <input type="text" name="wfname" lay-verify="name" placeholder="请填写姓名"
                                       class="input-text" v-model="userInfo.name">
                            </div>
                        </div>
                        <div class="wfform-box">
                            <label class="wfform-label">手机号码</label>
                            <div class="wfform-opt">
                                <input type="text" name="wfmob" id="wfmob" lay-verify="mob" placeholder="请填写手机号码"
                                       class="input-text" v-model="userInfo.tel">
                            </div>
                        </div>
                        <div class="wfform-box">
                            <label class="wfform-label">所在地区</label>
                            <div class="wfform-opt area">
                                <span class="wfprovince"><select id="wfprovince" name="wfprovince" lay-verify="province"
                                                                 class="select" lay-ignore=""
                                                                 v-model="userInfo.province"><option
                                        value="">请选择省</option><option value="北京市">北京市</option><option
                                        value="上海市">上海市</option><option value="天津市">天津市</option><option
                                        value="重庆市">重庆市</option><option value="广东省">广东省</option><option
                                        value="福建省">福建省</option><option value="湖北省">湖北省</option><option
                                        value="湖南省">湖南省</option><option value="河北省">河北省</option><option
                                        value="河南省">河南省</option><option value="山西省">山西省</option><option
                                        value="江苏省">江苏省</option><option value="浙江省">浙江省</option><option
                                        value="安徽省">安徽省</option><option value="江西省">江西省</option><option
                                        value="山东省">山东省</option><option value="辽宁省">辽宁省</option><option
                                        value="吉林省">吉林省</option><option value="黑龙江省">黑龙江省</option><option value="四川省">四川省</option><option
                                        value="贵州省">贵州省</option><option value="云南省">云南省</option><option
                                        value="海南省">海南省</option><option value="陕西省">陕西省</option><option
                                        value="甘肃省">甘肃省</option><option value="青海省">青海省</option><option
                                        value="广西">广西</option><option value="宁夏">宁夏</option><option
                                        value="新疆">新疆</option><option value="西藏">西藏</option><option
                                        value="内蒙古">内蒙古</option><option value="香港">香港</option><option
                                        value="澳门">澳门</option><option value="台湾">台湾</option></select></span>
                            </div>
                        </div>
                        <div class="wfform-box">
                            <label class="wfform-label">详细地址</label>
                            <div class="wfform-opt">
                                <input type="text" name="wfaddress" lay-verify="address" placeholder="请填写详细地址"
                                       class="input-text" v-model="userInfo.address">
                            </div>
                        </div>
                        <div class="wfform-box">
                            <label class="wfform-label">付款方式</label>
                            <div class="wfform-pro radio">
                                <span class="auto"><input type="radio" checked="" name="wfpayment" id="wfpayment1"
                                                          onclick="pay_total(1);paypstab(1)" value="cod"
                                                          class="input-radio" lay-ignore=""><label
                                        for="wfpayment1">货到付款</label></span>
                                <span id="payps1" class="payps">温馨提示：选择货到付款在家等快递公司送货上门，先验货后付款！</span>
                                <span id="payps2" class="payps"
                                      style="display:none;">温馨提示：全球领先的第三方支付平台，在线支付，安全可靠！</span>
                                <span id="payps3" class="payps"
                                      style="display:none;">温馨提示：全球领先的第三方支付平台，在线支付，安全可靠！</span>
                                <span id="payps4" class="payps"
                                      style="display:none;">温馨提示：提交后请用你的手机登陆支付宝或微信扫描二维码完成付款！</span>
                                <span id="payps5" class="payps"
                                      style="display:none;">温馨提示：请拨打我们网站上的免费客服电话，索要银行汇款帐号。</span>
                            </div>
                        </div>
                        <div class="wfform-box">
                            <label class="wfform-label">留言</label>
                            <div class="wfform-opt">
                                <textarea name="wfguest" placeholder="请填写补充说明"
                                          class="textarea">请尽快安排发货，送货之前手机联系，谢谢！</textarea>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="wfwrap">
                    <div class="wfform-box">
                        <button @click="post" id="wfsubmit" lay-submit="" lay-filter="wfsubmit" class="wfbtn btn-g"
                                :disabled="buttonStatus">
                            立即提交订单
                        </button>
                    </div>
                </div>
            </div>
            <footer>
                <p>
                </p>
                <center>
                    <img src="../assets/img/foot.png" tppabs="http://vips.laoyejia8.cn/fishing-poleimages/foot.png">
                </center>
                <p></p>
                <p>
                </p>
            </footer>
        </div>

        <nav>
            <ul class="Transverse">
                <li>
                    <a href="#order">
                        <strong>在线下单</strong></a>
                </li>
                <li>
                    <a href="tel:18971247426">
                        <strong>电话咨询</strong></a>
                </li>
                <li>
                    <a href="sms:18971247426">
                        <strong>短信订购</strong></a>
                </li>
            </ul>
        </nav>
    </div>
</template>
<script>
    import '../assets/css/qdwap.css'
    import '../assets/css/style.css'
    import axios from 'axios'

//    axios.defaults.baseURL = 'http://localhost:3000'

    export default {
        data() {
            return {
                num: 1,
                price: 99.00,
                choosen: 1,
                buttonStatus: false,
                userInfo: {
                    name: '',
                    tel: '',
                    province: '',
                    address: '',
                    message: '请尽快发货，送货之前手机联系，谢谢'
                },
                products: [
                    {
                        id: 1,
                        name: '3.6米(28调) 99元',
                        price: 99
                    }, {
                        id: 2,
                        name: '3.9米(28调) 135元',
                        price: 135
                    }, {
                        id: 3,
                        name: '4.5米(28调) 140元',
                        price: 140
                    }, {
                        id: 4,
                        name: '4.8米(28调)160元',
                        price: 160
                    }, {
                        id: 5,
                        name: '5.4米(28调) 170元',
                        price: 170
                    }
                ]
            }
        },
        created() {
            axios.get('/products').then(res => {
                this.products = res.data
            }).catch(err => {
                console.log(err.message)
            })
        },
        methods: {
            changeProduct(e) {
                const target = e.target
                if (target.tagName.toLowerCase() === 'input' && target.type.toLowerCase() === 'radio') {
                    this.price = Number(target.value)
                    this.choosen = target.dataset.id
                }
            },
            numdec() {
                if (this.num > 1) {
                    this.num -= 1
                }
            },
            numinc() {
                this.num += 1
            },
            post() {
                if (this.userInfo.name.trim() === '') {
                    alert('请填写姓名')
                    return
                }
                if (this.userInfo.tel.trim() === '') {
                    alert('请填写手机号')
                    return
                }
                if (this.userInfo.province.trim() === '') {
                    alert('青选择省份')
                    return
                }
                if (this.userInfo.address.trim() === '') {
                    alert('请填写详细地址')
                    return
                }

                this.buttonStatus = true
                axios.post('/order', {
                    data: {
                        product: {
                            id: this.choosen,
                            num: this.num
                        },
                        user: this.userInfo
                    }
                }).then(res => {
                    alert('订购成功')
                    setTimeout(() => {
                        window.location.replace('/')
                    }, 1000)

                }).catch(err => {
                    alert('订购失败')
                    this.buttonStatus = false
                })


            }

        }
    }
</script>
<style lang="css" scoped>
    nav a:hover {
        color: #fff;
    }

    .radio-item {
        line-height: 35px;
    }


</style>